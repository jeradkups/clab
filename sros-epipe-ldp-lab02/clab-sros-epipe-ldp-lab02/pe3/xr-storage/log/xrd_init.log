2025-02-17 00:32:42,936 INFO [xrd_init] Starting up
[xrd_bootstrap_data_copier] Recursing into '/xr-storage-shadow/config'
[xrd_bootstrap_data_copier] Recursing into '/xr-storage-shadow/disk1'
[xrd_bootstrap_data_copier] Recursing into '/xr-storage-shadow/log'
[xrd_bootstrap_data_copier] Recursing into '/xr-storage-shadow/scratch'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/config/config' to '/xr-storage/config/config'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/disk1/nvram' to '/xr-storage/disk1/nvram'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/log/journal' to '/xr-storage/log/journal'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/log/lastlog' to '/xr-storage/log/lastlog'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/log/upstart' to '/xr-storage/log/upstart'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/log/wtmp' to '/xr-storage/log/wtmp'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/log/xr_bootstrap_boot.log' to '/xr-storage/log/xr_bootstrap_boot.log'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/log/xr_bootstrap_install.log' to '/xr-storage/log/xr_bootstrap_install.log'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/scratch/config' to '/xr-storage/scratch/config'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/scratch/core' to '/xr-storage/scratch/core'
[xrd_bootstrap_data_copier] Copying '/xr-storage-shadow/scratch/shutdown' to '/xr-storage/scratch/shutdown'
2025-02-17 00:32:42,960 INFO [xrd_init] Checking env vars
2025-02-17 00:32:43,023 INFO [xrd_init] Detected cgroup version 2
2025-02-17 00:32:43,048 DEBUG [xrd_init] Found cgroup memory limit max from path /sys/fs/cgroup//memory.max
2025-02-17 00:32:43,061 INFO [xrd_init] Checking kernel version
2025-02-17 00:32:43,078 INFO [xrd_init] Checking capabilities
2025-02-17 00:32:43,182 INFO [xrd_init] Checking devices
2025-02-17 00:32:43,194 INFO [xrd_init] Checking /run tmpfs
2025-02-17 00:32:43,212 INFO [xrd_init] /run not mounted, attempting to mount as tmpfs
2025-02-17 00:32:43,231 INFO [xrd_init] Checking /proc/sys mounts
2025-02-17 00:32:43,248 INFO [xrd_init] Create bind mount /proc/sys
2025-02-17 00:32:43,271 DEBUG [xrd_init] Remounting /proc/sys with options ro
2025-02-17 00:32:43,301 INFO [xrd_init] Create bind mount /proc/sys/net
2025-02-17 00:32:43,326 DEBUG [xrd_init] Remounting /proc/sys/net with options rw
2025-02-17 00:32:43,347 INFO [xrd_init] Create bind mount /proc/sys/fs/mqueue
2025-02-17 00:32:43,369 DEBUG [xrd_init] Remounting /proc/sys/fs/mqueue with options rw
2025-02-17 00:32:43,387 INFO [xrd_init] Checking cgroup mounts
2025-02-17 00:32:43,404 INFO [xrd_init] Checking shared memory size
2025-02-17 00:32:43,459 INFO [xrd_init] Resizing shared memory to 24659568640
2025-02-17 00:32:43,487 INFO [xrd_init] ASLR is enabled
2025-02-17 00:32:43,499 INFO [xrd_init] Checking available memory
[xrd_inotify_boot_check] Checking enough inotify resource for new XRd instance (resource count 4000)...
[xrd_inotify_boot_check] Max open file count: soft 1048576, hard 1048576
[xrd_inotify_boot_check] Inotify check success - proceeding!
2025-02-17 00:32:43,973 INFO [xrd_init] Launching platform setup
2025-02-17 00:32:44,367 INFO: [init_platform] Parsing env vars
2025-02-17 00:32:44,368 DEBUG: [init_platform] All env vars: {'CLAB_LABEL_CLAB_NODE_TYPE': '', 'no_proxy': 'localhost,127.0.0.1,::1,*.local,172.80.80.0/24,172.80.80.31,172.80.80.32,172.80.80.51,172.80.80.52,172.80.80.53,172.80.80.54,clab-1,clab-2,client1,client2,p1,pe1,pe2,pe3', 'HOSTNAME': 'pe3', 'XR_FIRST_BOOT_CONFIG': '/etc/xrd/first-boot.cfg', 'CLAB_LABEL_CLAB_TOPO_FILE': '/root/clab/sros-epipe-ldp-lab02/sros-lab.clab.yml', 'PWD': '/', 'CLAB_LABEL_CLAB_NODE_NAME': 'pe3', 'CLAB_LABEL_CLAB_NODE_LAB_DIR': '/root/clab/sros-epipe-ldp-lab02/clab-sros-epipe-ldp-lab02/pe3', 'CLAB_LABEL_CLAB_NODE_GROUP': '', 'HOME': '/root', 'CLAB_LABEL_CLAB_OWNER': 'root', 'TERM': 'xterm', 'NO_PROXY': 'localhost,127.0.0.1,::1,*.local,172.80.80.0/24,172.80.80.31,172.80.80.32,172.80.80.51,172.80.80.52,172.80.80.53,172.80.80.54,clab-1,clab-2,client1,client2,p1,pe1,pe2,pe3', 'XR_EVERY_BOOT_SCRIPT': '/etc/xrd/mgmt_intf_v6_addr.sh', 'SHLVL': '1', 'CLAB_INTFS': '2', 'XR_INTERFACES': 'linux:Gi0-0-0-1,xr_name=Gi0/0/0/1;linux:Gi0-0-0-2,xr_name=Gi0/0/0/2;', 'CLAB_LABEL_CONTAINERLAB': 'sros-epipe-ldp-lab02', 'CLAB_LABEL_CLAB_NODE_KIND': 'cisco_xrd', 'PATH': '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', 'XR_MGMT_INTERFACES': 'linux:eth0,xr_name=Mg0/RP0/CPU0/0,chksum,snoop_v4,snoop_v6', '_': '/opt/cisco/xrd-python/init_platform.py'}
2025-02-17 00:32:44,368 DEBUG: [init_platform] Parsing env var XR_INTERFACES
2025-02-17 00:32:44,368 DEBUG: [init_platform] Parsing env var XR_MGMT_INTERFACES
2025-02-17 00:32:44,369 DEBUG: [init_platform] Parsing env var XR_FIRST_BOOT_CONFIG
2025-02-17 00:32:44,369 DEBUG: [init_platform] Parsing env var XR_EVERY_BOOT_SCRIPT
2025-02-17 00:32:44,369 INFO: [init_platform] Performing PI setup
2025-02-17 00:32:44,370 WARNING: [xrd.boot.check] The kernel socket parameters are insufficient for running XRd in a
production deployment. They may be used in a lab deployment, but must
be increased to the required minimums for production deployment.
Lower values may result at XR IPC loss and unpredictable behavior,
particularly at higher scale.

The required minimum settings are:
    net.core.netdev_max_backlog=300000
    net.core.optmem_max=67108864
    net.core.rmem_default=67108864
    net.core.rmem_max=67108864
    net.core.wmem_default=67108864
    net.core.wmem_max=67108864

The current host settings are:
    net.core.rmem_default=212992
    net.core.rmem_max=212992
    net.core.wmem_default=212992
    net.core.wmem_max=212992

Values can be changed by adding e.g.
'net.core.rmem_default=67108864' to /etc/sysctl.conf or
in a dedicated conf file under /etc/sysctl.d/.
Or for a temporary fix, running e.g.:
  sysctl -w net.core.rmem_default=67108864

2025-02-17 00:32:44,370 DEBUG: [xrd.boot] Using default disk usage limit of 6 GiB
2025-02-17 00:32:44,370 DEBUG: [xrd.boot] Configured boot config: /etc/xrd/first-boot.cfg
2025-02-17 00:32:44,371 DEBUG: [xrd.boot] Configured boot script: /etc/xrd/mgmt_intf_v6_addr.sh
2025-02-17 00:32:44,371 DEBUG: [xrd.boot] ZTP not enabled
2025-02-17 00:32:44,372 INFO: [init_platform] Performing PD setup
2025-02-17 00:32:44,372 DEBUG: [xrd.pd.interfaces] Got XR interface type Gi and r/s/i/p 0/0/0/1 from interface linux:Gi0-0-0-1,xr_name=Gi0/0/0/1
2025-02-17 00:32:44,374 DEBUG: [xrd.pd.interfaces] Port number 1 parsed from interface linux:Gi0-0-0-1,xr_name=Gi0/0/0/1
2025-02-17 00:32:44,375 DEBUG: [xrd.pd.interfaces] Creating interface with id: Gi0-0-0-1, xr_name: Gi0/0/0/1, port: 1, chksum: False, snoop_v4: False, snoop_v6: False, snoop_v4_default_route: False, snoop_v6_default_route: False from element linux:Gi0-0-0-1,xr_name=Gi0/0/0/1 in env var XR_INTERFACES
2025-02-17 00:32:44,375 DEBUG: [xrd.pd.interfaces] Got XR interface type Gi and r/s/i/p 0/0/0/2 from interface linux:Gi0-0-0-2,xr_name=Gi0/0/0/2
2025-02-17 00:32:44,375 DEBUG: [xrd.pd.interfaces] Port number 2 parsed from interface linux:Gi0-0-0-2,xr_name=Gi0/0/0/2
2025-02-17 00:32:44,375 DEBUG: [xrd.pd.interfaces] Creating interface with id: Gi0-0-0-2, xr_name: Gi0/0/0/2, port: 2, chksum: False, snoop_v4: False, snoop_v6: False, snoop_v4_default_route: False, snoop_v6_default_route: False from element linux:Gi0-0-0-2,xr_name=Gi0/0/0/2 in env var XR_INTERFACES
2025-02-17 00:32:44,375 DEBUG: [xrd.pd.interfaces] Got XR interface type Mg and r/s/i/p 0/RP0/CPU0/0 from interface linux:eth0,xr_name=Mg0/RP0/CPU0/0,chksum,snoop_v4,snoop_v6
2025-02-17 00:32:44,376 DEBUG: [xrd.pd.interfaces] Port number 0 parsed from interface linux:eth0,xr_name=Mg0/RP0/CPU0/0,chksum,snoop_v4,snoop_v6
2025-02-17 00:32:44,376 DEBUG: [xrd.pd.interfaces] Creating interface with id: eth0, xr_name: Mg0/RP0/CPU0/0, port: 0, chksum: True, snoop_v4: True, snoop_v6: True, snoop_v4_default_route: False, snoop_v6_default_route: False from element linux:eth0,xr_name=Mg0/RP0/CPU0/0,chksum,snoop_v4,snoop_v6 in env var XR_MGMT_INTERFACES
2025-02-17 00:32:44,376 DEBUG: [xrd.pd.interfaces] Writing env {'XR_INTERFACES_LEGACY': 'Gi0/0/0/1:Gi0-0-0-1,Gi0/0/0/2:Gi0-0-0-2,Mg0/RP0/CPU0/0:eth0', 'XR_SNOOP_V4_INTERFACES': 'Mg0/RP0/CPU0/0', 'XR_SNOOP_V6_INTERFACES': 'Mg0/RP0/CPU0/0', 'XR_SNOOP_V4_DEFAULT_ROUTE_INTERFACES': '', 'XR_SNOOP_V6_DEFAULT_ROUTE_INTERFACES': '', 'XR_CHECKSUM_OFFLOAD_COUNTERACT': 'Mg0/RP0/CPU0/0'} to /var/xr/scratch/.xrd_env.sh
2025-02-17 00:32:44,377 DEBUG: [init_platform] Saving runtime data before exit
2025-02-17 00:32:44,377 DEBUG: [xrd] Saving runtime data to /var/cisco/xrd/settings.json
2025-02-17 00:32:44,406 DEBUG [xrd_init] Loading env /var/xr/scratch/.xrd_env.sh:
export XR_INTERFACES_LEGACY=Gi0/0/0/1:Gi0-0-0-1,Gi0/0/0/2:Gi0-0-0-2,Mg0/RP0/CPU0/0:eth0
export XR_SNOOP_V4_INTERFACES=Mg0/RP0/CPU0/0
export XR_SNOOP_V6_INTERFACES=Mg0/RP0/CPU0/0
export XR_SNOOP_V4_DEFAULT_ROUTE_INTERFACES=
export XR_SNOOP_V6_DEFAULT_ROUTE_INTERFACES=
export XR_CHECKSUM_OFFLOAD_COUNTERACT=Mg0/RP0/CPU0/0
2025-02-17 00:32:44,419 INFO [xrd_init] Starting systemd
2025-02-17 00:32:44,433 INFO [xrd_init] Detected container virtualisation: docker
